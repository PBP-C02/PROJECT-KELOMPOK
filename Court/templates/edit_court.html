{% extends 'base.html' %}
{% load static %}
{% block meta %}
<title>MoveBuddy | Edit Court</title>
{% endblock meta %}

{% block content %}
<section class="relative min-h-screen overflow-hidden py-12">
  <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('{% static 'img/bg.png' %}');"></div>
  <div class="absolute inset-0 bg-white/95"></div>

  <div class="relative z-10">
    {% include 'includes/navbar.html' %}
    <div class="mx-auto flex w-full max-w-6xl justify-center px-5 sm:px-8">
      <div class="w-full max-w-4xl rounded-[2.5rem] bg-white/95 px-8 py-10 shadow-[0_32px_80px_rgba(15,23,42,0.12)] backdrop-blur sm:px-12">
        <div class="mb-8 text-center">
          <span class="inline-flex items-center justify-center rounded-full bg-white px-4 py-1 text-xs font-semibold uppercase tracking-[0.35em] text-slate-500 shadow">
            Edit Court
          </span>
          <h1 class="mt-4 text-3xl font-semibold uppercase tracking-[0.18em] text-slate-900">Perbarui Informasi Lapangan</h1>
          <p class="mt-2 text-sm text-slate-500">
            Update detail lapangan agar informasinya selalu akurat.
          </p>
        </div>

        <form method="POST" enctype="multipart/form-data" class="space-y-6">
          {% csrf_token %}
          {% if form.non_field_errors %}
            <div class="rounded-2xl border border-rose-200 bg-rose-100 px-4 py-3 text-sm font-semibold text-rose-700">
              {{ form.non_field_errors }}
            </div>
          {% endif %}

          <div class="grid gap-5 md:grid-cols-2">
            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>Court Name</span>
              {{ form.name }}
              {% for error in form.name.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>Sport Type</span>
              {{ form.sport_type }}
              {% for error in form.sport_type.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>City</span>
              {{ form.location }}
              {% for error in form.location.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>Nomor Kontak</span>
              {{ form.owner_phone }}
              <span class="text-xs font-medium text-slate-500">Gunakan angka saja, contoh 081234567890.</span>
              {% for error in form.owner_phone.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700 md:col-span-2">
              <span>Full Address</span>
              {{ form.address }}
              {% for error in form.address.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>Price per Hour (IDR)</span>
              {{ form.price_per_hour }}
              {% for error in form.price_per_hour.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>

            <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <span>Rating (1-5, optional)</span>
              {{ form.rating }}
              {% for error in form.rating.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </label>
          </div>

          <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
            <span>Facilities (comma separated)</span>
            {{ form.facilities }}
            {% for error in form.facilities.errors %}
              <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
            {% endfor %}
          </label>

          <label class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
            <span>Description (optional)</span>
            {{ form.description }}
            {% for error in form.description.errors %}
              <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
            {% endfor %}
          </label>

          <div class="grid gap-6 md:grid-cols-2">
            <div class="flex flex-col gap-2 text-sm font-semibold text-slate-700">
              <label for="{{ form.maps_link.id_for_label }}" class="flex flex-col gap-2">
                <span>Google Maps link</span>
                {{ form.maps_link }}
              </label>
              <span class="text-xs font-medium text-slate-500">Kosongkan untuk mempertahankan lokasi saat ini.</span>
              {% for error in form.maps_link.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </div>

            <div class="flex flex-col gap-3 text-sm font-semibold text-slate-700">
              <span>Court Photo (optional)</span>
              {{ form.image }}
              <span class="text-xs font-medium text-slate-500">Unggah untuk mengganti foto saat ini. Biarkan kosong untuk mempertahankannya.</span>
              {% for error in form.image.errors %}
                <span class="text-xs font-semibold text-rose-600">{{ error }}</span>
              {% endfor %}
            </div>
          </div>

          {% if court.image %}
          <div class="rounded-2xl border border-dashed border-slate-300 bg-slate-50/90 px-5 py-4 text-center text-sm font-semibold text-slate-600">
            <p>Foto saat ini</p>
            <img src="{{ court.image.url }}" alt="{{ court.name }}" class="mt-3 w-full rounded-2xl object-cover shadow-lg">
          </div>
          {% endif %}

          <button type="submit" class="w-full rounded-2xl bg-gradient-to-r from-lime-300 to-lime-400 px-6 py-4 text-xs font-semibold uppercase tracking-[0.3em] text-[#1f2b15] shadow-[0_20px_40px_rgba(154,216,97,0.3)] transition hover:-translate-y-0.5 hover:shadow-[0_28px_60px_rgba(154,216,97,0.35)]">
            Save Changes
          </button>

          <div class="flex flex-col gap-3 sm:flex-row">
            <a href="{% url 'Court:court_detail' court.id %}" class="flex-1 rounded-2xl border border-slate-200 bg-white/80 px-6 py-3 text-center text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-800">
              Kembali ke detail
            </a>
            <a href="{% url 'Court:show_main' %}" class="flex-1 rounded-2xl border border-slate-200 bg-white/80 px-6 py-3 text-center text-sm font-semibold text-slate-600 transition hover:border-slate-300 hover:text-slate-800">
              Lihat semua lapangan
            </a>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>
{% endblock content %}
